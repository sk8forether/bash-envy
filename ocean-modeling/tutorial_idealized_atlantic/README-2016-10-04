Patrick Heimbach
03-Oct-2016
------


Overview:
------

This setup is a very light-weight idealized configuration of the Atlantic Ocean, represented as a square domain (with closed northern and southern open boundaries). It has been used in studies like this one:

Zanna, L., Heimbach, P., Moore, A. M., & Tziperman, E. (2010). The Role of Ocean Dynamics in the Optimal Growth of Tropical SST Anomalies. Journal of Physical Oceanography, 40(5), 983â€“1003. http://doi.org/10.1175/2009JPO4196.1


Compile and run:
------

I've placed the configuration on the seismic machines in
~ph6848/class_2016_fall/tutorial_idealized_atlantic/

I suggest you copy it into your MITgcm tree, but instead of creating a sub-directory to verification/, create a separate directory MITgcm/mysetups/, i.e. starting from MITgcm/ do:
mkdir mysetups/
cd mysetups/
cp -r ~ph6848/class_2016_fall/tutorial_idealized_atlantic .

# The directory structure folllows closely that of the verification experiments.
# Starting from MITgcm/mysetups/tutorial_idealized_atlantic/ we have the following directories:
# build_eq/
# code_eq/
# input_eq/
# run_eq/

# 1. compile:
cd build_eq/
../../../tools/genmake2 -mods ../code_eq
make depend
make

# 2. link to run-directory:
cd ../run_eq
ln -s ../build_eq/mitgcmuv .
ln -s ../input_eq/* .

# 3. run:
./mitgcmuv >! output.txt

The configuration as is runs for only 10 time steps. It creates binary output (real*8 direct-access files, labeled *.data and *.meta).


A note on post-processing, e.g. plotting
------
A basic set of matlab routines is contained in the MITgcm distribution.
You will find it under utils/matlab/

File README.txt contains a very brief list of scripts, and what they do. Most scripts contain a descriptive header section.

Perhaps the most relevant script for you is
rdmds.m
This script reads meta information contained in FILENAME.meta and enables it to read in the binary file without further help. Two examples.

1. reading in grid file XC.data (coordinates in x-direction):
xc=rdmds('XC');

2. reading in output generated via dumpFreq., for example file T.0000007200.data
theta=rdmds('T.0000007200');
%
The script will automatically assemble a global domain in case files have been written in tiled form, i.e. in form
*.001.001.data
*.001.002.data
*.002.001.data
*.002.002.data
%
The script can also read multiple records contain within the same file, or multiple files with increasing (10-digit) time-step/iteration number.
%
A full description of its usage in contained in the extensive header section of rdmds.

ALTERNATIVELY, when using MNC to produce netCDF output, you may find yourself in the situation having produced tiled output (see above), and wanting to merge the tiled output into a global file.
Script gluemnc contained in the directory
utils/scripts/ will enable you to do this.



